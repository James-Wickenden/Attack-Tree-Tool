<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-GB" xml:lang="en-GB">

	<head>
		<meta charset="UTF-8"/>
		<title>mxgraph test 1</title>

        <script type= "text/javascript">
            mxBasePath = 'resources/scripts/mxgraph';
        </script>
        <script type= "text/javascript" src='resources/scripts/mxgraph/js/mxClient.js'></script>
        <script type= "text/javascript">
            function main(container) {
                if (!mxClient.isBrowserSupported()) {
                    mxUtils.error('Broswer not supported', 200, false)
                }
                else {
                    var graph = new mxGraph(container);

                    new mxRubberband(graph);

                    var parent = graph.getDefaultParent();

                    var layout = new mxHierarchicalLayout(graph);

                    graph.getModel().beginUpdate();
                    try {
                        graph.addListener(mxEvent.CLICK, function(sender, evt) {
                            var cell = evt.getProperty('cell');
                            console.log(cell.value);
                            console.log(sender.toString());
                        });
                        var v1 = graph.insertVertex(parent, null, "Hello", 20, 20, 80, 30);
                        var v2 = graph.insertVertex(parent, null, "World", 200, 20, 80, 30);

                        var e1 = graph.insertEdge(parent, null, "", v1, v2)
                    }
                    finally {
                        graph.getModel().endUpdate();
                    }
                }
            };

            function read(graph, filename) {
                var req = mxUtils.load(filename);
                var root = req.getDocumentElement();
                var dec = new mxCodec(root.ownerDocument);

                dec.decode(root, graph.getModel());
            }
        </script>
	</head>

	<body onload="main(document.getElementById('graphContainer'))">
		<h1>Learning mxgraph intialising and updating.</h1>
        <div id='graphContainer' style='overflow:hidden; width:800px; height:800px; border:1px solid black'></div>
	</body>
</html>
